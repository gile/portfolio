<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>	
	<link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link rel="stylesheet" type="text/css" href="css/maps.css">
	<link rel="stylesheet" type="text/css" href="pie/pie.css">
	<link rel="stylesheet" type="text/css" href="arcs/arcs.css">
	<link rel="stylesheet" type="text/css" href="choro/choro.css">

	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	
	<script src="js/jssor.slider.mini.js"></script>

	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://d3js.org/d3.geo.projection.v0.min.js" charset="utf-8"></script>

	<script src="util/underscore-min.js"></script>
	<script src="util/utility.functions.js"></script>
	<script src="util/us-states.js"></script>
	<script src="util/world-countries.js"></script>

	<script src="pie/pie.js"></script>
	<script src="arcs/arcs.js"></script>
	<script src="choro/choro.js"></script>

	<script src="util/data.js"></script>
	
	<script type="text/javascript">
		var 	id,
			duration = 500;

		var columnWidth,
			$currentColumn;

		var 	columnOffset = {
				'home': 0,
				'case-study': -1,
				'maps': -2
			};

		
		
		/////////////////////////////////////////////////////////////
		// Init Code
		/////////////////////////////////////////////////////////////
		$('document').ready(function() {

			$('.header-link').click(function() {
				var name = $(this).attr('name');
				headerLinkClick(name);
			});

			$currentColumn = $('#column-home');
			$('.main-container').css({height: $currentColumn.height()});

			doneResizing();	
		});

		/////////////////////////////////////////////////////////////
		// Global Event Handlers
		/////////////////////////////////////////////////////////////
		$(window).resize(function() {
		    clearTimeout(id);
		    id = setTimeout(doneResizing, 500);
		    
		});	

		/////////////////////////////////////////////////////////////
		// Private Methods
		/////////////////////////////////////////////////////////////	
		function doneResizing(){
			columnWidth = $('html').width();
			console.log('RESIZE');

			$('.main-container').width(columnWidth * 4);
			$('.column').width(columnWidth);
		}


		function headerLinkClick(columnName) {
			var mainContainerCss,
				$thisColumn = $('#column-' + columnName);

			$currentColumn.animate({opacity: 0});
			$thisColumn.animate({opacity: 1});
			$currentColumn = $thisColumn;

			mainContainerCss = {
				height: $thisColumn.height(),
				marginLeft: columnWidth * columnOffset[columnName]
			}

			$('.main-container').animate(mainContainerCss, duration);
		}	 
	</script>

</head>
<body>
	<div class="header">
		<a id="link-home" class="header-link" name="home">Home</a>
		<a id="link-case-study" class="header-link" name="case-study">Case Study</a>
		<a id="link-maps" class="header-link" name="maps">Maps</a>
		
	</div>
	<div class="main-container">

		<!--  ++++++++++++++++++++++++++++ -->
		<!-- 			HOME 					    	-->
		<!-- ++++++++++++++++++++++++++++ -->
		 <div class="column" id="column-home">
		    	
		    	<div class="cover-photo"></div>
		    	HOME
		    	
		    	<!-- <div><img u="image" src="images/vg3.jpg" style="width:600px; height: 400px"/></div> -->
		  </div>

		<!--  ++++++++++++++++++++++++++++ -->
		<!-- 			CASE STUDY			    	-->
		<!-- ++++++++++++++++++++++++++++ -->
		<div class="column" id="column-case-study">
			   	<div class="content-container">
			    		<h1 class="title page_title">Case Study</h1>

			    		
			    	</div>
		</div>

		<!--  ++++++++++++++++++++++++++++ -->
		<!-- 			MAPS 					    	-->
		<!-- ++++++++++++++++++++++++++++ -->
		 <div class="column" id="column-maps">
		  	<div class="content-container">
			    	<h1 class="title page_title">Three maps</h1>
				<div class="text page_text">
					The maps displayed below were created in javascript, using Mike Bostock's <a href="http://d3js.org/">D3</a> data visualization library.<br>
					<span class="notice">All the data is randomly generated</span>

				</div>

				<!--  ***********  PIE  ***********   -->
				<h3 class="title map_title pie_title">Brand Market Share</h3>
				<div class="text map_text pie_text">
					Hover over a pie chart to see a more detailed display, or click on any country to zoom in.
				</div>
				<div class="container PIE"></div>


				<!--  ***********  ARCS  ***********   -->
				<div class="title map_title arcs_title">Import / Export Sites </div>
				<div class="text map_text arcs_text">
					Hover over a country to see its import/export balance, or click on any country to zoom in.
				</div>
				<div class="container ARCS"></div>


				<!--  ***********  CHORO  ***********   -->
				<div class="title map_title choro_title">Brand Growth</div>
				<div class="text map_text choro_text">
					Hover over a state to see more info, or click on the links at the top of the map (e.g. "<span class="button_name">marketgrowth</span>") <br>to change the diplayed measure.
				</div>
				<div class="container CHORO"></div>
			</div>
		  </div>
		 
	</div>

	
</body>
</html>